{% if comments is empty %}
    <div class="dimsog-comments-is-empty">
        No Comments Yet
    </div>
{% endif %}

{% for comment in comments[parentId] %}
    {% if comment.deleted_at is empty or comments[comment.id] is not empty %}
        <div id="comment-{{ comment.id }}" class="dimsog-comment-item {% if comment.deleted_at is not empty %} dimsog-comment-item--deleted {% endif %}">
            <div class="dimsog-comment-item-header">
                <div class="dimsog-comment-item-header__user">{{ comment.user_name }}</div>
                <div class="dimsog-comment-item-header__date">{{ comment.created_at | date(dateformat) }}</div>
            </div>
            <div class="dimsog-comment-item__text">
                {% if comment.deleted_at is empty %}
                    {{ comment.comment | nl2br }}
                {% else %}
                     This comment has been deleted
                {% endif %}
            </div>
            {% if tree and comment.active and comment.deleted_at is empty %}
            <div class="dimsog-comment-item-answer">
                <a href="#" class="dimsog-comment-item-answer__link app-dimsog-comment-item-answer__link" data-comment-id="{{ comment.id }}" data-user-name="{{ comment.user_name }}">answer</a>
            </div>
            {% endif %}

            {% if comments[comment.id] is not empty %}
                {% partial '@list' parentId = comment.id %}
            {% endif %}
        </div>
    {% endif %}
{% endfor %}
